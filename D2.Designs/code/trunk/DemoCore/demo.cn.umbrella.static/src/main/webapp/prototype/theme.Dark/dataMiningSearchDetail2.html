<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>数据挖掘查询2--自然人</title>
		<link rel="stylesheet" type="text/css" href="../../thirdparty/jquery-easyui-1.4.5/themes/default/easyui.css"/>
		<link rel="stylesheet" type="text/css" href="js/vertical-timeline/vertical-timeline.css"/>
		<link rel="stylesheet" type="text/css" href="css/base.css">
		<link rel="stylesheet" type="text/css" href="css/icon.font.css"/>
		<link rel="stylesheet" type="text/css" href="css/layout.css">
	</head>

	<body>
		<div class="wrapper">
			<!-- 头部 -->
			<div class="nav-outer">
				<div class="nav-inner">
					<div class="nav-box">
						<h1 class="logo"></h1>
						<ul class="nav" id="nav">
							<li>
								<a href="index.html">
									首页
								</a>
								
							</li>
							<li class="cur">
								<a href="report.html">
									数据管理系统
								</a>
							</li>
							<li>
								<a href="###">
									数据查询系统
								</a>
							</li>
							<li>
								<a href="###">
									报告管理系统
								</a>
							</li>
							<li>
								<a href="###">
									数据挖掘系统
								</a>
							</li>
							<li>
								<a href="###">
									应用支撑系统
								</a>
							</li>
						</ul>
						<div class="overflow-hidden">
							<ul class="top-info right">
								<li class="relative">
									<a href="###">您好，李玉东（cxy）<span class="fi-arrow-down"></span></a>
									
									<div class="user-control">
										<a href="###">
											<span class="fi-key"></span>
											修改密码
										</a>
										<a href="###">
											<span class="fi-envelop"></span>
											消息
										</a>
										<a href="###">
											<span class="fi-cog"></span>
											设置
										</a>
									</div>
								</li>
								<li>
									<a href="###">
										<span class="fi-exit"></span>退出
									</a>
								</li>
							</ul>
						</div>
					</div>
				</div>
			
				<div class="vertical-shadow"></div>
			</div>
			<!-- 侧边栏 -->
			<div class="sub-nav-outer">
				<div class="sub-nav-box clearfix">
					<div class="left sub-nav-scroll">
						<div class="scroll">
							<div class="sub-nav-inner">
								<div>
									<h3><i class="fi-bell"></i>表格</h3>
									<ul>
										<li><a href="base.html">dG基础结构</a></li>
										<li><a href="base2-noControlBtn.html">dG基础结构-无</a></li>
										<li><a href="doubleTable.html">双表格1</a></li>
										<li><a href="doubleTable2.html">双表格2</a></li>
										<li><a href="tabTable.html">tab同页</a></li>
										<li><a href="tabTable-differentPage1.html">tab不同页</a></li>
										<li><a href="tabTable-nesting-mix.html">tab嵌套-同页不同页混合</a></li>
										<li><a href="tabTable-differentPage7-compositeAnalysis.html">综合分析</a></li>
										<li><a href="treeAndTable.html">树和表格</a></li>
										<li><a href="treeAndTable2.html">树,表格,查询栏</a></li>
										<li><a href="doubleTableAndForm.html">上:表单,下:并列表格</a></li>
										<li><a href="treeAndTableAndForm.html">树\表格\表单</a></li>
										<li><a href="pureTable.html">纯表格</a></li>
									</ul>
									<h4><a href="widget.html"><i class="fi-bell"></i>小部件</a></h4>
									<h3><i class="fi-bell"></i>表单</h3>
									<ul>
										<li><a href="formAccordion.html">折叠表单</a></li>
										<li><a href="formAccordion-iframe.html">折叠表单-iframe</a></li>
										<li><a href="formModule.html">分块表单</a></li>
										<li><a href="formSimple.html">基本表单</a></li>
										<li><a href="formSimple-detail.html">基本表单-详情</a></li>
										<li><a href="formEdit-detail.html">可编辑-详情</a></li>
										<li><a href="cns-detail.html">承诺书-详情</a></li>
									</ul>
									<h4><a href="searchAndCharts.html"><i class="fi-bell"></i>搜索和图表</a></h4>
									<h3><i class="fi-bell"></i>数据归集目录</h3>
									<ul>
										<li><a href="dataDirectory.html">版本一</a></li>
										<li><a href="dataDirectory2.html">版本二</a></li>
									</ul>
									<h3 class="cur"><i class="fi-bell"></i>数据挖掘</h3>
									<ul>
										<li><a href="dataMiningSearch1.html">查询一</a></li>
										<li><a href="dataMiningSearch2.html">查询二</a></li>
										<li><a href="dataMiningSearch3.html">查询三</a></li>
										<li><a href="dataMiningSearch4-v1.html">查询四-档案查询</a></li>
										<li><a href="dataMiningSearch5-v1.html">查询五-报告查询</a></li>
										<li><a href="dataMiningSearchDetail1.html">查询详情一</a></li>
										<li><a href="dataMiningSearchDetail2.html">查询详情二</a></li>
										<li><a href="dataMiningSearchDetail3-v1.html" class="cur-a">查询详情三</a></li>
										<li><a href="dataMiningSearchDetail4-v1.html">查询详情四-档案查询-企业</a></li>
										<li><a href="dataMiningSearchDetail5-v1.html">查询详情五-档案查询-个人</a></li>
										<li><a href="dataMiningLayout1.html">布局-左一右上一右下二</a></li>
										<li><a href="dataMiningLayout2.html">布局-左二右一</a></li>
										<li><a href="dataMiningLayout3.html">布局-田字</a></li>
										<li><a href="dataMiningLayout4.html">布局-查询栏下田字</a></li>
										<li><a href="dataMiningLayout5.html">布局-左右</a></li>
										<li><a href="dataMiningCharts1.html">关系图1</a></li>
										<li><a href="dataMiningCharts2.html">关系图2</a></li>
										<li><a href="dataMiningCharts3.html">树图</a></li>
									</ul>
									<h3><i class="fi-bell"></i>列表</h3>
									<ul>
										<li><a href="list.html">列表1</a></li>
										<li><a href="list2.html">列表2</a></li>
									</ul>
									<h3><i class="fi-bell"></i>信用评估</h3>
									<ul>
										<li><a href="credit-evaluate-charts.html">信用评估图表</a></li>
										<li><a href="credit-evaluate-details.html">信用评估详情</a></li>
									</ul>
									<h4><a href="ranking.html"><i class="fi-bell"></i>排行</a></h4>
									<h4><a href="icon.html"><i class="fi-bell"></i>图标</a></h4>
								</div>
							</div>
						</div>
					</div>
					<div class="left horizontal-shadow relative nav-control">
						<i class="absolute icon-arrow-left"></i>
					</div>
				</div>
			</div>
			<!-- 主体 -->
			<div class="main">
				<!-- 面包屑 -->
				<div class="main-bread-crumb">
					<div class="breadcrumb-hidden">
						<span class="fi-position left"></span>
						<ol class="left">
							<li>
								<span>：</span>
								<a href="###">项目管理</a>
							</li>
							<li>
								<span class="breadcrumb-line">>></span><a href="###">项目填报</a>
							</li>
						</ol>
					</div>
				</div>
				<!-- 表格 -->
				<div class="main-table-outer">
					<div class="w-per100 h-per100 relative">
						<div class="detailinfo-title w-per100">
							<h4 class="bold-weight color-blue font-size16 display-i-b">陈明真</h4>
							<span class="font-size14">411425********8110</span>
							<span class="font-size14">数据更新时间：2016-08-08</span>
							<input type="button" class="right theme-btn mg-r-10" style="margin-top: 8px;" onclick="javascript:history.go(-1)" value="返回">
						</div>
						<div class="clearfix detailinfo-outer absolute">
							<div class="timeline-scroll">
								<div class="">
									<div class="clearfix detailinfo-box-table">
										<table class="">
											<colgroup>
												<col style="width: 20%;" />
												<col style="width: 30%;" />
												<col style="width: 20%;" />
												<col style="width: 30%;" />
											</colgroup>
											<tr>
												<th>性别</th>
												<td>男</td>
												<th>民族</th>
												<td>汉</td>
											</tr>
											<tr>
												<th>年龄</th>
												<td>28</td>
												<th>手机号码</th>
												<td>15658803189</td>
											</tr>
											<tr>
												<th>电子邮箱</th>
												<td>chenmingzhen@123.com</td>
												<th>信用评价</th>
												<td>低风险</td>
											</tr>
											<tr>
												<th>户籍地址</th>
												<td colspan="3">温州市鹿城区紫金数码园3号楼15层1501</td>
											</tr>
										</table>
									</div>
								</div>
								<div class="bottom-module">
									<div class="w-per100 relative">
										<h3 class="timeline-title">发展历程</h3>
										<div id="my_svg"></div>
									</div>
									
									<div class="h-per30 clearfix">
										<div class="highcharts-outer left">
											<div id="pie1" class="highcharts" style="width: 100%;height: 100%;"></div>
										</div>
										<div class="highcharts-outer left">
											<div id="pie2" class="highcharts" style="width: 100%;height: 100%;"></div>
										</div>
									</div>
									<div class="h-per30 clearfix">
										<div class="highcharts-outer left" style="background: #eaf6fb;">
											<div id="goodRecord" class="highcharts" style="width: 100%;height: 100%;"></div>
										</div>
										<div class="highcharts-outer left" style="background: #f6f6f6;">
											<div id="badRecord" class="highcharts" style="width: 100%;height: 100%;"></div>
										</div>
									</div>
									<div class="h-per30 clearfix">
										<div class="highcharts-outer left" style="background: #fafafa;">
											<div id="creditRating" class="highcharts" style="width: 100%;height: 100%;"></div>
										</div>
									</div>
									
								</div>
								
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<script type="text/javascript" src="../../thirdparty/jquery-1.11.3/jquery.min.js"></script>
		<script type="text/javascript" src="../../thirdparty/jquery-easyui-1.4.5/jquery.easyui.min.js"></script>
		<!--slimScroll-->
		<script type="text/javascript" src="../../thirdparty/slimScroll/jquery.slimscroll.min.js"></script>
		<!--highcharts-->
		<script type="text/javascript" src="../../thirdparty/Highcharts-4.1.3/js/highcharts.js"></script>
		<script type="text/javascript" src="../../thirdparty/Highcharts-4.1.3/js/highcharts-more.js"></script>
		<!--Raphaël -->
		<script src="../../thirdparty/raphael.min.js" type="text/javascript"></script>
			
		<script src="js/layout.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			$(function(){
				//滚动条
				$('.timeline-scroll').slimscroll({
					height:'100%'
			    });
				//图表
				$('#badRecord').highcharts({
			        chart: {
			            type: 'line',
			            backgroundColor: 'none',
			        },
			        title: {
			            text: '不良记录'
			        },
			        xAxis: {
			            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
			        },
			        yAxis: {
			            title: {
			                text: ''
			            }
			        },
			        plotOptions: {
			            line: {
			                dataLabels: {
			                    enabled: true
			                },
			            }
			        },
			        series: [{
			            name: 'Tokyo',
			            data: [7.0, 6.9, 9.5, 14.5, 18.4, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6],
			        	color: '#058DC7'
			        }],
			        credits:{
					     enabled:false // 禁用版权信息
					}
			    });
			    $('#goodRecord').highcharts({
			        chart: {
			            type: 'line',
			            backgroundColor: 'none',
			        },
			        title: {
			            text: '优良记录'
			        },
			        xAxis: {
			            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
			        },
			        yAxis: {
			            title: {
			                text: ''
			            }
			        },
			        plotOptions: {
			            line: {
			                dataLabels: {
			                    enabled: true
			                },
			            }
			        },
			        series: [{
			            name: 'London',
			            data: [3.9, 4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 10.3, 6.6, 4.8],
			            color: '#FF9655'
			        }],
			        credits:{
					     enabled:false // 禁用版权信息
					}
			    });
			    
			    $('#creditRating').highcharts({
			     	chart:{
			     		backgroundColor: 'none',
			     	},
			        xAxis: {
			            min: -0.5,
			            max: 5.5
			        },
			        yAxis: {
			            min: 0,
			            title: {
			                text: null
			            }
			        },
			        title: {
			            text: '信用度'
			        },
			        series: [{
			            type: 'line',
			            name: 'Regression Line',
			            data: [[0, 1.11], [5, 4.51]],
			            marker: {
			                enabled: false
			            },
			            states: {
			                hover: {
			                    lineWidth: 0
			                }
			            },
			            enableMouseTracking: false
			        }, {
			            type: 'scatter',
			            name: 'Observations',
			            data: [1, 1.5, 2.8, 3.5, 3.9, 4.2],
			            marker: {
			                radius: 4
			            }
			        }],
			        credits:{
					     enabled:false // 禁用版权信息
					}
			    });
			    
			    //设置pie的颜色为同色
			    Highcharts.getOptions().plotOptions.pie.colors = (function () {
			        var colors = [],
			            base = Highcharts.getOptions().colors[0],
			            i;
			        for (i = 0; i < 10; i += 1) {
			            // Start out with a darkened base color (negative brighten), and end
			            // up with a much brighter color
			            colors.push(Highcharts.Color(base).brighten((i - 4) / 16).get());
			        }
			        return colors;
			    }());
			    
			   	$('#pie1').highcharts({
			        chart: {
			        	plotBackgroundColor: null,
			            plotBorderWidth: null,
			            plotShadow: false,
			            backgroundColor: 'none',
			        },
			        title: {
			            text: '信用信息<br />占比',
			            align: 'center',
       					verticalAlign: 'middle',
       					style:{
			                fontWeight: 'bold',
			                fontSize: 13,
			                color:'#2ba8f8'
			            }
			        },
			        tooltip: {
			            pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
			        },
			        plotOptions: {
			            pie: {
			            	innerSize: '40%',
			                allowPointSelect: true,
			                cursor: 'pointer',
			                dataLabels: {
			                    enabled: true,
			                    format: '<b>{point.name}</b>: {point.percentage:.1f} %',
			                    style: {
			                        color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
			                    }
			                }
			            }
			        },
			        series: [{
			            type: 'pie',
			            name: '占',
			            data: [
			                ['欠费',1],
			                ['处罚',4],
			                ['判决',0],
			                ['黑名单',5],
			                ['奖励',8],
			                ['资质',6]
			            ]
			        }],
			        credits:{
					     enabled:false // 禁用版权信息
					}
			    });
			    
			    $('#pie2').highcharts({
			        chart: {
			        	plotBackgroundColor: null,
			            plotBorderWidth: null,
			            plotShadow: false,
			            backgroundColor: 'none',
			        },
			        title: {
			            text: '资产/社保<br />信息',
			            align: 'center',
     					verticalAlign: 'middle',
       					style:{
			                fontWeight: 'bold',
			                fontSize: '13px',
			                color:'#2ba8f8'
			            }
			        },
			        tooltip: {
			            pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
			        },
			        plotOptions: {
			            pie: {
			            	innerSize: '40%',
			                allowPointSelect: true,

			                cursor: 'pointer',
			                dataLabels: {
			                    enabled: true,
			                    format: '<b>{point.name}</b>: {point.percentage:.1f} %',
			                    style: {
			                        color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
			                    }
			                },
			                center: ['50%', '53%']
			            }
			        },
			        series: [{
			            type: 'pie',
			            name: '占',
			            data: [
			                ['住房',1],
			                ['救助',4],
			                ['低保',2],
			                ['车辆',5],
			                ['公积金',8],
			                ['养老保险',2.5],
			                ['医疗保险',3],
			                ['工商保险',3.5],
			                ['失业保险',3],
			                ['生育保险',2]
			            ]
			        }],
			        credits:{
					     enabled:false // 禁用版权信息
					}
			    });
			    //图表大小
				updateChartSize();
				//svg添加
				svgCourse();
			});
			//图表大小
			function updateChartSize() {
				$(".highcharts").each(function(){
					var $this =$(this);
					var $id = $this.attr("id");
					var height = $this.parent("div").height(); //获取父级高度
					var width= $this.parent("div").width(); //获取父级宽度
					
					//动态修改大小
					var hCharts = $("#" + $id).highcharts();
					hCharts.setSize(width, height);
				})
			};
			
			//历程
			var contentArray = [
            	{"datetime":"1993.03.07","content":"文字文字文字文字文字文"},
            	{"datetime":"1996.11.22","content":"文字文字文字文字1"},
            	{"datetime":"2011.01.14","content":"文字文字文字文字文字文字文字出"},
            	{"datetime":"2011.10.17","content":"文字文字"},
            	{"datetime":"2011.11.22","content":"文字文字文字"},
            	{"datetime":"2011.12.30","content":"文字文字达的文字"},
	         	{"datetime":"2012.07.11","content":"文字文字文字文"},
            	{"datetime":"2012.07.26","content":"文字文"},
            	{"datetime":"2013.09.13","content":"文字文字文字文字文字文字文字出"}
            ];
			function svgCourse(){
	        	var aLen = contentArray.length,
	        		aRows = Math.ceil( aLen / 5),
	        		pWidth = $('#my_svg').width();
	            var r = Raphael(document.getElementById("my_svg"), pWidth, aRows * 104);
	            //线
	            var bgLine = r.set();
	            //圆
	            var tCircle = r.set();
	            //日期
	            var dateText = r.set();
	            //内容
	            var contentText = r.set();
	        	var startX = 60,
	        		lastX = pWidth - 60,
	        		x = startX,
	            	y = 70,
	           		dY = y * 2 + 22,
	            	spacing = (lastX - startX) / 4,
	            	dateY = 22,
	            	n = 0,
	            	u = 0,
	            	cHei = 0,oldHei = 0,oldY = 0;
	            $.each(contentArray, function(i,val){
	            	var dateStr = contentArray[i].datetime,
	            		contentStr = contentArray[i].content;
	            	var newT = contentStr.replace(/(.{8})/g,'$1\n');
	            	var _length =contentStr.length,
	            		tRows = Math.ceil(_length/8),
	            		half = parseInt(tRows/2);
	            		cHei = tRows * 16;
	            	if(n != 0){
		            	if(n%5 == 0){
		            		oldY = y;
		            		x = startX;
		            		y +=  oldHei - x;
		           			dY =  y + 70;
		           			if(u == 0){
		           				u = -1;
		           			}else{
		           				u = 0;
		           			}
		            	};
	            	};
	            	if(n == 5){
		        		n = 1;
		        	}else{
		            	n++;
		        	};
		            //圆
	            	tCircle.push(
		            	r.circle(x ,y)
		        	).attr({fill: "#fff", stroke: "#2ba8f8",r:5,"stroke-width":2});
	            	//日期
		            dateText.push(
		            	r.text(x, y - 20, dateStr).attr({"font-size":12})
		            ).attr({fill: "#999", "text-anchor": "middle"});
	            	//内容
					contentText.push(
		            	r.text(x, y - dateY *2,newT).attr({"font-size":12})
	            	).attr({fill: "#999", "text-anchor": "middle"});
					//线
		           	if(((aLen - 1) == i) && (n%5 != 0)){
		           		bgLine.push(r.path("M"+ (x + 5) +","+ y +"L"+ lastX +"," + y).attr({"stroke":"#ccc","stroke-width":4}));
		           		bgLine.push(r.path("M"+ (x + 5) +","+ y +"L"+ (x + 60) +"," + y).attr({"stroke":"#2ba8f8","stroke-width":4}));
		           	}else if((n == 1)||(n%5 != 0) &&((aLen - 1) != i)){
		           		bgLine.push(r.path("M"+ (x + 5) +","+ y +"L"+ lastX +"," + y).attr({"stroke":"#ccc","stroke-width":4}));
		           		bgLine.push(r.path("M"+ (x + 5) +","+ y +"L"+ (x + spacing - 5) +"," + y).attr({"stroke":"#2ba8f8","stroke-width":4}));
		           		
		           	};
	              	if(parseInt(cHei) > parseInt(oldHei)){
	              		oldHei = parseInt(cHei) + (dY - dateY - half*10);
	              	};
	            	x = x + spacing;
				});
			};
			
			//监听窗体大小变更事件
			$(window).resize(function(){
				//图表自适应
				updateChartSize();
				//移除svg
				$("#my_svg svg").remove();
				//svg重新添加
				svgCourse();
			});
		</script>
	</body>

</html>